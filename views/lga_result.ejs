<!DOCTYPE html>
<html>
<head>
  <title>LGA Results</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container py-5">
  <h2 class="mb-4">Summed Results by LGA</h2>

  <form method="get" action="/lga/">
    <div class="row g-2 mb-4">
      <div class="col-md-8">
        <select class="form-select" name="lga" onchange="window.location='/lga/'+this.value">
          <option disabled selected>Select an LGA</option>
          <% lgas.forEach(l => { %>
            <option value="<%= l.lga_id %>" <%= selectedLga && selectedLga.lga_id == l.lga_id ? 'selected' : '' %>>
              <%= l.lga_name %>
            </option>
          <% }) %>
        </select>
      </div>
    </div>
  </form>

  <% if (totals) { %>
    <h4>Results for <%= selectedLga.lga_name %></h4>
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>Party</th>
          <th>Total Score</th>
        </tr>
      </thead>
      <tbody>
        <% totals.forEach(t => { %>
          <tr>
            <td><%= t.partyname %></td>
            <td><%= t.total_score || 0 %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>

  <a href="/" class="btn btn-secondary">â¬… Back</a>
</div>

</body>
</html>
